---
import "../styles/global.css";
import Sidebar from "../components/Sidebar.astro";
import TocNav from "../components/TocNav.astro";
import global from "../data/global.yml";

const { frontmatter } = Astro.props;
const { site, menu, footer } = global;
---

<html lang="hu">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>{frontmatter?.title ? `${frontmatter.title} – ${site.title}` : site.title}</title>
    <meta name="description" content={frontmatter?.description || site.description} />
  </head>

  <body class="bg-gray-100 text-gray-800 min-h-screen">
    <!-- Fő konténer - max 1440px, középre igazítva -->
    <div class="max-w-[1440px] mx-auto bg-white min-h-screen flex relative">
      <!-- Bal oldali menü -->
      <aside class="hidden lg:block w-64 border-r bg-white shadow-sm flex-shrink-0">
        <div class="sticky top-0 h-screen overflow-y-auto overflow-x-hidden" style="scrollbar-width: thin; scrollbar-color: rgb(203 213 225) transparent;">
          <Sidebar menu={menu} />
        </div>
      </aside>

      <!-- Központi tartalom -->
      <main class="flex-1 w-full px-6 py-6">
        <!-- Oldalcím -->
        {frontmatter?.title && (
          <header class="mb-8">
            <h1 class="text-3xl font-bold border-b border-gray-200 pb-3 mb-4">
              {frontmatter.title}
            </h1>
            {frontmatter?.description && (
              <p class="text-gray-600">{frontmatter.description}</p>
            )}
          </header>
        )}

        <slot />
      </main>

      <!-- Jobb oldali tartalomjegyzék -->
      <aside class="hidden lg:block w-64 border-l bg-white shadow-sm flex-shrink-0">
        <div class="sticky top-0 h-screen overflow-y-auto py-6">
          <TocNav />
        </div>
      </aside>

      <!-- Lábléc -->
      <footer class="w-full bg-gray-100 text-sm p-4 lg:hidden">
        <p>{footer.address}</p>
        <p>
          Email: <a href={`mailto:${footer.email}`} class="text-blue-600 hover:underline">{footer.email}</a>
        </p>
      </footer>
    </div>
    
    <script>
      import '../scripts/alpine.js';
    </script>
  </body>
</html>
