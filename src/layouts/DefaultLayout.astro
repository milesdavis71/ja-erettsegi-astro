---
import "../styles/global.css";
import Sidebar from "../components/Sidebar.astro";
import TocNav from "../components/TocNav.astro";
import global from "../data/global.yml";

const { frontmatter } = Astro.props;
const { site, menu, footer } = global;
---

<html lang="hu">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>{frontmatter?.title ? `${frontmatter.title} – ${site.title}` : site.title}</title>
    <meta name="description" content={frontmatter?.description || site.description} />
  </head>

  <body class="bg-gray-50 text-gray-800 flex min-h-screen">
    <!-- Bal oldali menü -->
    <aside class="hidden lg:block fixed h-full w-64 border-r bg-white shadow-sm">
      <Sidebar menu={menu} />
    </aside>

    <!-- Központi tartalom -->
    <main class="flex-1 w-full lg:ml-64 lg:mr-64 px-6 py-6">
      <!-- Oldalcím -->
      {frontmatter?.title && (
        <header class="mb-8">
          <h1 class="text-3xl font-bold border-b border-gray-200 pb-3 mb-4">
            {frontmatter.title}
          </h1>
          {frontmatter?.description && (
            <p class="text-gray-600">{frontmatter.description}</p>
          )}
        </header>
      )}

      <slot />
    </main>

    <!-- Jobb oldali tartalomjegyzék -->
    <aside class="hidden lg:block fixed right-0 h-full w-64 border-l bg-white shadow-sm overflow-y-auto py-6">
      <TocNav />
    </aside>

    <!-- Lábléc -->
    <footer class="w-full bg-gray-100 text-sm p-4 lg:hidden">
      <p>{footer.address}</p>
      <p>
        Email: <a href={`mailto:${footer.email}`} class="text-blue-600 hover:underline">{footer.email}</a>
      </p>
    </footer>
  </body>
</html>
